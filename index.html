<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EEP1 Assembler</title>
  <style>
    body {
      font-family: monospace;
      margin: 20px;
      background: #0f172a;
      color: #e5e7eb;
    }
    textarea {
      width: 100%;
      height: 200px;
      background: #020617;
      color: #e5e7eb;
      border: 1px solid #334155;
      padding: 10px;
    }
    button {
      margin-top: 10px;
      padding: 8px 16px;
      font-family: monospace;
      cursor: pointer;
    }
    pre {
      background: #020617;
      border: 1px solid #334155;
      padding: 10px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

<h2>EEP1 Assembler</h2>

<textarea id="src">
MOV R0, #3
MOV R1, R0
ADD R1, #1
ADD R3, R0, R1
</textarea>

<br />
<button id="run">Assemble</button>

<h3>Output</h3>
<pre id="out"></pre>

<script type="module">
  import { assembleText } from "./assembler.js";

  const src = document.getElementById("src");
  const out = document.getElementById("out");
  const btn = document.getElementById("run");

  btn.onclick = () => {
    try {
      const res = assembleText(src.value);
      if (res.tag === 0) {
        out.textContent = res.fields[0];
      } else {
        out.textContent = "ERROR:\n" + res.fields[0].join("\n");
      }
    } catch (e) {
      out.textContent = "JS ERROR:\n" + e;
    }
  };
</script>

</body>
</html>
